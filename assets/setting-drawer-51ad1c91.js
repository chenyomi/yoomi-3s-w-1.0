import{_ as N}from"./modal-4cf97576.js";import{a as O,V as k}from"./VRow-ae608ecd.js";import{a as I,V as P}from"./VSelect-f8b60354.js";import{V as p}from"./VTextField-00465832.js";import{V as R}from"./VContainer-61c17a00.js";import{i as Y,a as w,b as C,q as $,w as u,e as n,G as h,h as e,o as F,d as S,f as y,t as x,Q as j,B as z,n as L,K as G,A as X,I as M}from"./index-19a302a2.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{V as K}from"./VDataTableVirtual-2512bbfd.js";import{V as Q}from"./VCheckbox-59368711.js";import"./VCard-4e0404ab.js";import"./VAvatar-bf7834fa.js";import"./VImg-8c97a24c.js";/* empty css              */import"./VDialog-1e02a8a3.js";import"./VOverlay-22800ce3.js";import"./forwardRefs-b500f5ac.js";import"./VMenu-7cc09679.js";import"./VDivider-e0d3d1fc.js";import"./VCheckboxBtn-24dab6a2.js";const T={__name:"setting-drawer-form",props:{data:{type:Object}},setup(U,{expose:c}){const B=U,a=Y("density"),t=w(B.data),V=()=>new Promise(b=>{b()}),f=[{title:"停用",value:!1},{title:"启用",value:!0}];return c({submit:V}),(b,s)=>(C(),$(R,null,{default:u(()=>[n(O,null,{default:u(()=>[n(k,{cols:"4"}),n(k,{cols:"4",class:"text-center"},{default:u(()=>[n(I,{class:"ma-1",color:"#FF9800"},{default:u(()=>[h(" X轴方向 ")]),_:1})]),_:1}),n(k,{cols:"4",class:"text-center"},{default:u(()=>[n(I,{class:"ma-1",color:"#4CAF50"},{default:u(()=>[h(" Y轴方向 ")]),_:1})]),_:1}),n(k,{cols:"4"},{default:u(()=>[n(p,{modelValue:e(t).distans,"onUpdate:modelValue":s[0]||(s[0]=m=>e(t).distans=m),label:"安全距离：",density:e(a),class:"mb-2",suffix:"mm"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).name,"onUpdate:modelValue":s[1]||(s[1]=m=>e(t).name=m),label:"网板名称：",density:e(a),class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).raster,"onUpdate:modelValue":s[2]||(s[2]=m=>e(t).raster=m),label:"厚度：",density:e(a),suffix:"mm",class:"mb-4"},null,8,["modelValue","density"]),n(P,{modelValue:e(t).status,"onUpdate:modelValue":s[3]||(s[3]=m=>e(t).status=m),density:e(a),items:f,label:"是否开启"},null,8,["modelValue","density"])]),_:1}),n(k,{cols:"4"},{default:u(()=>[n(p,{modelValue:e(t).exmx0,"onUpdate:modelValue":s[4]||(s[4]=m=>e(t).exmx0=m),label:"板：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmx1,"onUpdate:modelValue":s[5]||(s[5]=m=>e(t).exmx1=m),label:"原点偏移：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmx2,"onUpdate:modelValue":s[6]||(s[6]=m=>e(t).exmx2=m),label:"占位：",density:e(a),class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmx3,"onUpdate:modelValue":s[7]||(s[7]=m=>e(t).exmx3=m),label:"单元尺寸：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmx4,"onUpdate:modelValue":s[8]||(s[8]=m=>e(t).exmx4=m),label:"单元间距：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),n(k,{cols:"4"},{default:u(()=>[n(p,{modelValue:e(t).exmy0,"onUpdate:modelValue":s[9]||(s[9]=m=>e(t).exmy0=m),label:"板：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmy1,"onUpdate:modelValue":s[10]||(s[10]=m=>e(t).exmy1=m),label:"原点偏移：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmy2,"onUpdate:modelValue":s[11]||(s[11]=m=>e(t).exmy2=m),label:"占位：",density:e(a),class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmy3,"onUpdate:modelValue":s[12]||(s[12]=m=>e(t).exmy3=m),label:"单元尺寸：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),n(p,{modelValue:e(t).exmy4,"onUpdate:modelValue":s[13]||(s[13]=m=>e(t).exmy4=m),label:"单元间距：",density:e(a),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},H=""+new URL("pos-ff621adf.svg",import.meta.url).href;const J=["src"],Z={class:"w-100 pa-1",style:{background:"#000",color:"#fff","font-size":"0.75rem"}},ee={class:"d-flex flex-wrap gap-x-10 justify-center"},te={class:"d-flex flex-wrap gap-x-10 justify-center"},le={__name:"setting-drawer-svg",props:{data:{type:Object}},setup(U,{expose:c}){const a=w(U.data),t=w(null);return F(()=>{setTimeout(()=>{const f=document.getElementById("embed");if(f){t.value=document.getElementById("embed").getSVGDocument();const b=27,s=27,m=f.clientWidth,i=Object.assign({exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10},a.value),_=t.value.getElementById("svg"),W=t.value.getElementById("box");t.value.getElementById("itemBox");const E=m-b*2;_.setAttribute("width",m),_.setAttribute("height",450),W.setAttribute("width",E),W.setAttribute("height",E/2);const d=new Array(i.exmx2).fill(),r=new Array(i.exmy2).fill();if(i.type==0&&r.forEach((l,o)=>{d.forEach((g,A)=>{let v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("x",b+i.exmx1+(i.exmx3+i.exmx4)*A),v.setAttribute("y",s+i.exmy1+(i.exmy3+i.exmy4)*o),v.setAttribute("width",i.exmx3),v.setAttribute("height",i.exmy3),v.style.fill="#aaaaaa",_.appendChild(v)})}),i.type==1){const l=i.exmx3/2;r.forEach((o,g)=>{d.forEach((A,v)=>{let D=document.createElementNS("http://www.w3.org/2000/svg","circle");D.setAttribute("cx",b+i.exmx1+l+(i.exmx3+i.exmx4)*v),D.setAttribute("cy",s+i.exmy1+l+(i.exmy3+i.exmy4)*g),D.setAttribute("r",l),D.style.fill="#aaaaaa",_.appendChild(D)})})}}},500)}),c({submit:()=>new Promise(f=>{f()})}),(f,b)=>(C(),S(j,null,[y("embed",{id:"embed",src:e(H),width:"100%",height:"auto",type:"image/svg+xml"},null,8,J),y("div",Z,[y("div",ee,[y("span",null,"板（X）："+x(e(a).exmx0)+"mm",1),y("span",null,"原点偏移（X）："+x(e(a).exmx1)+"mm",1),y("span",null,"占位（X）："+x(e(a).exmx2)+"个",1),y("span",null,"单元尺寸（X）："+x(e(a).exmx3)+"mm",1),y("span",null,"间距（X）："+x(e(a).exmx4)+"mm",1)]),y("div",te,[y("span",null,"板（Y）："+x(e(a).exmy0)+"mm",1),y("span",null,"原点偏移（Y）："+x(e(a).exmy1)+"mm",1),y("span",null,"占位（Y）："+x(e(a).exmy2)+"个",1),y("span",null,"单元尺寸（Y）："+x(e(a).exmy3)+"mm",1),y("span",null,"间距（Y）："+x(e(a).exmy4)+"mm",1)])])],64))}},ae=q(le,[["__scopeId","data-v-b7213d86"]]),se={style:{"text-align":"end"}},ke={__name:"setting-drawer",setup(U){const{t:c}=z(),B=Y("density"),a=w([]),t=w(!0),V=w();let f=[];const b=w();let s=[{id:1,distans:8,name:"800*400 1004792",status:!0,type:0,exmx0:800,exmy0:400,exmx1:20,exmx2:8,exmx3:83,exmx4:10,exmy1:20,exmy2:4,exmy3:83,exmy4:10,raster:3},{id:2,distans:8,name:"800*400 1004792",status:!0,type:0,exmx0:800,exmy0:400,exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10,raster:3},{id:3,distans:8,name:"800*400 1004792",status:!0,type:1,exmx0:800,exmy0:400,exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10,raster:3},{id:4,distans:8,name:"800*400 1004792",status:!0,type:1,exmx0:800,exmy0:400,exmx1:20,exmx2:8,exmx3:83,exmx4:10,exmy1:20,exmy2:4,exmy3:83,exmy4:10,raster:3},{id:5,distans:8,name:"800*400 1004792",status:!0,type:0,exmx0:800,exmy0:400,exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10,raster:3},{id:6,distans:8,name:"800*400 1004792",status:!0,type:0,exmx0:800,exmy0:400,exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10,raster:3}];const m={async fetch({page:d,itemsPerPage:r,sortBy:l}){return new Promise(o=>{setTimeout(()=>{o({items:s})},500)})}},i=Y("btnList");F(()=>{L(()=>{i.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:X(T),fn:({close:d,openLoading:r,closeLoading:l,diaFormRef:o})=>{r({text:"正在上传更新"}),o.submit().finally(()=>{d(),setTimeout(()=>{l()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:80,formWidth:800,slot:X(T),slotData:a.value.filter(d=>d.id==V.value)[0],fn:({close:d,openLoading:r,closeLoading:l,diaFormRef:o})=>{r({text:"正在上传更新"}),o.submit().finally(()=>{d(),setTimeout(()=>{l()},2e3)})}},{name:"保存",color:"#66BB6A",icon:"bx-cloud-upload",size:"large",width:220,mark:"是否保存并上传更新数据？",fn:({close:d,openLoading:r,closeLoading:l,diaFormRef:o})=>{r({text:"正在上传更新"}),d(),setTimeout(()=>{l()},2e3)}}]})});const _=w([{align:"start",sortable:!1,key:"exclusive",fixed:!0,minWidth:70},{title:c("名称"),align:"start",sortable:!1,key:"name",minWidth:180},{title:c("安全距离"),key:"distans",align:"center",sortable:!1,minWidth:90},{title:c("厚度"),key:"raster",align:"center",sortable:!1,minWidth:60},{title:c("板")+"（X-Y）",key:"exmx0",align:"center",sortable:!1,minWidth:90},{title:c("原点偏移")+"（X-Y）",key:"exmx1",align:"center",sortable:!1,minWidth:130},{title:c("占位")+"（X-Y）",key:"exmx2",align:"center",sortable:!1,minWidth:110},{title:c("占位单元尺寸")+"（X-Y）",key:"exmx3",align:"center",sortable:!1,minWidth:160},{title:c("占位单元间距")+"（X-Y）",key:"exmx4",align:"center",sortable:!1,minWidth:160}]);function W({page:d,itemsPerPage:r,sortBy:l}){t.value=!0,m.fetch({page:d,itemsPerPage:r,sortBy:l}).then(({items:o,total:g})=>{a.value=o,t.value=!1,V.value=o[0].id,i.value[1].slotData=a.value.filter(A=>A.id==o[0].id)[0]})}const E=()=>{b.value.open({formWidth:854,hideDiaName:!0,hideDiaOk:!0,hideDiaCancel:!0,slot:X(ae),slotData:a.value.filter(d=>d.id==V.value)[0],fn:({close:d,openLoading:r,closeLoading:l,diaFormRef:o})=>{r({text:"正在上传更新"}),o.submit().finally(()=>{d(),setTimeout(()=>{l()},2e3)})}})};return(d,r)=>(C(),S(j,null,[n(K,{"fixed-header":"",headers:_.value,items:a.value,loading:t.value,"loading-text":"",hover:"",height:"calc(100vh - 230px)","expand-on-click":"",density:e(B),"onUpdate:options":W,"onUpdate:expanded":r[0]||(r[0]=l=>{l.map(o=>{e(f).includes(o)||(V.value=o,e(i)[1].slotData=a.value.filter(g=>g.id==o)[0])}),e(f).map(o=>{l.includes(o)||(V.value=o,e(i)[1].slotData=a.value.filter(g=>g.id==o)[0])}),G(f)?f.value=l:f=l})},{"item.exclusive":u(({item:l})=>[n(Q,{"model-value":l.id==V.value,readonly:""},null,8,["model-value"])]),"item.exmx0":u(({item:l})=>[h(x(l.exmx0)+"-"+x(l.exmy0),1)]),"item.exmx1":u(({item:l})=>[h(x(l.exmx1)+"-"+x(l.exmy1),1)]),"item.exmx2":u(({item:l})=>[h(x(l.exmx2)+"-"+x(l.exmy2),1)]),"item.exmx3":u(({item:l})=>[h(x(l.exmx3)+"-"+x(l.exmy3),1)]),"item.exmx4":u(({item:l})=>[h(x(l.exmx4)+"-"+x(l.exmy4),1)]),loading:u(()=>[]),bottom:u(()=>[y("div",se,[n(M,{class:"ma-2 w-25",onClick:E},{default:u(()=>[h(x(d.$t("预览")),1)]),_:1})])]),_:1},8,["headers","items","loading","density"]),n(N,{ref_key:"modal",ref:b},null,512)],64))}};export{ke as default};
