import{S as f,P as M,A as S,D as w,a as T,W as C,M as h,B as m,b,c as l,d as E,e as P,E as v,C as A,O as I}from"./OrbitControls-9a794e07.js";class H{constructor(a){this.options={container:"#box",name:"800*400 1004796 料盘6号",status:!0,type:0,exmx0:800,exmy0:400,exmx1:20,exmx2:10,exmx3:65,exmx4:10,exmy1:20,exmy2:5,exmy3:65,exmy4:10,raster:3,tuobanx:800,tuobany:400,tuobanz:5,L1X:500,L1Y:400,L1Z:-300,L2X:-500,L2Y:400,L2Z:-300},this.animation=null,this.domBox=null,this.cardBox=null,this.scene=null,this.camera=null,this.controls=null,this.renderer=null,this.geos=[],this.init(),this.updata(a)}init(){this.cardBox=document.querySelector(this.options.container),this.scene=new f,this.camera=new M(75,this.cardBox.clientWidth/this.cardBox.clientHeight,.1,1e3)}disWebGl(){cancelAnimationFrame(this.animation),this.animation=null,this.domBox.innerHTML="",this.controls=null,this.renderer.forceContextLoss(),this.renderer.dispose(),this.renderer=null,this.geos=[],this.scene.clear()}updata(a){this.theme=localStorage.getItem("theme");const x=new S(200);this.scene.add(x),x.position.x=-this.options.exmx0/2-10,x.position.z=-this.options.exmy0/2-10,x.position.y=this.options.raster,this.options=Object.assign(this.options,a);const c=new w(15658734,this.theme=="light"?2:1);c.position.set(this.options.L1X,this.options.L1Y,this.options.L1Z),this.scene.add(c);const d=new w(15658734,this.theme=="light"?2:1);d.position.set(this.options.L2X,this.options.L2Y,this.options.L2Z),this.scene.add(d);const g=new T(11184810,this.theme=="light"?3:2);this.scene.add(g),this.renderer=new C({antialias:!0}),this.renderer.setSize(this.cardBox.clientWidth,this.cardBox.clientHeight),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.camera.position.set(0,this.options.exmy0,this.options.exmy0);const L=new h(new m(this.options.exmx0,this.options.raster,this.options.exmy0),new b({color:12834515,roughness:.3}));L.position.y=this.options.raster/2;const y=new h(new m(this.options.tuobanx,this.options.tuobanz,this.options.tuobany),new l({color:13425629}));y.position.y=-this.options.tuobanz/2,this.scene.add(y);const r=new E().moveTo(0,0).lineTo(0,this.options.exmy0).lineTo(this.options.exmx0,this.options.exmy0).lineTo(this.options.exmx0,0).lineTo(0,0);for(let o=0;o<this.options.exmy2;o++)for(let t=0;t<this.options.exmx2;t++){const i=this.options.exmx1+(this.options.exmx3+this.options.exmx4)*t+this.options.exmx3/2,n=this.options.exmy1+(this.options.exmy3+this.options.exmy4)*o+this.options.exmy3/2,e=new P;this.options.type==0?(e.moveTo(i-this.options.exmx3/2,n-this.options.exmy3/2),e.lineTo(i+this.options.exmx3/2,n-this.options.exmy3/2),e.lineTo(i+this.options.exmx3/2,n+this.options.exmy3/2),e.lineTo(i-this.options.exmx3/2,n+this.options.exmy3/2),r.holes.push(e)):(e.absarc(i,n,this.options.exmx3/2,0,Math.PI*2,!1),r.holes.push(e))}let B=new v(r,{depth:this.options.raster,bevelEnabled:!1,curveSegments:50}),p=new h(B,new b({color:12834515,roughness:.3}));p.position.set(-this.options.exmx0/2,this.options.raster,-this.options.exmy0/2),p.rotation.set(Math.PI/2,0,0),this.scene.add(p);let s=null;this.options.type==0?[{geo:[10,20,60],pos:[this.options.exmx1+5-this.options.exmx0/2,10,this.options.exmy1+30-this.options.exmy0/2]},{geo:[10,20,60],pos:[this.options.exmx1+25-this.options.exmx0/2,10,this.options.exmy1+30-this.options.exmy0/2]},{geo:[10,20,60],pos:[this.options.exmx1+45-this.options.exmx0/2,10,this.options.exmy1+30-this.options.exmy0/2]}].forEach(t=>{s=new h(new m(...t.geo),new l({color:9941704})),s.position.set(...t.pos),this.scene.add(s)}):[{geo:[20,20,50],pos:[this.options.exmx1+this.options.exmx3/2-this.options.exmx0/2,25,this.options.exmy1+this.options.exmy3/2-this.options.exmy0/2]},{geo:[20,20,50],pos:[this.options.exmx1+this.options.exmx3/2-this.options.exmx0/2,25,this.options.exmy1+this.options.exmy3/2-this.options.exmy0/2+(this.options.exmy3+this.options.exmy4)]},{geo:[20,20,50],pos:[this.options.exmx1+this.options.exmx3/2-this.options.exmx0/2,25,this.options.exmy1+this.options.exmy3/2-this.options.exmy0/2+(this.options.exmy3+this.options.exmy4)*2]}].forEach(t=>{s=new h(new A(...t.geo),new l({color:9941704})),s.position.set(...t.pos),this.scene.add(s)});const u=()=>{this.animation=requestAnimationFrame(u),this.renderer.render(this.scene,this.camera)};this.controls=new I(this.camera,this.renderer.domElement),this.domBox=document.querySelector("#box"),this.renderer.domElement.setAttribute("class","fadeIn"),this.domBox.appendChild(this.renderer.domElement),u()}}export{H as c};
